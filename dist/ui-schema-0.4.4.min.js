/*! UI Schema v0.4.4 | (c) 2017 Arxitics | MIT license */
if("undefined"==typeof jQuery)throw new Error("jQuery has not been loaded yet for context");var schema=jQuery.isPlainObject(schema)?schema:{};!function(e){"use strict";schema=e.extend(!0,{setup:{classPrefix:"ui",dataPrefix:"schema",autoLoad:!0,autoBind:".schema",autoTrigger:".schema"},data:{event:"schema-event",namespace:"schema-namespace",selector:"schema-selector",options:"schema-options",model:"schema-model",value:"schema-value",text:"schema-text",adapter:"schema-adapter",controller:"schema-controller",trigger:"schema-trigger",init:"schema-init",empty:"schema-empty",view:"schema-view",template:"schema-template",snapshot:"schema-snapshot",condition:"schema-condition",iteration:"schema-itration",target:"schema-target",loader:"schema-loader",route:"schema-route",validate:"schema-validate",changed:"schema-changed",disabled:"schema-disabled",rating:"schema-rating",score:"schema-score",icons:"schema-icons",lazyload:"schema-lazyload",delay:"schema-delay",src:"schema-src",magnify:"schema-magnify",shape:"schema-shape",trim:"schema-trim",toggle:"schema-toggle",toggler:"schema-toggler",storage:"schema-storage",autoplay:"schema-autoplay",dismiss:"schema-dismiss",extract:"schema-extract",emoji:"schema-emoji",icon:"schema-icon",width:"schema-width",height:"schema-height",path:"schema-path",color:"schema-color"},events:{bind:{type:"bind",namespace:".event.data-api.schema",selector:"[data-schema-event]"},retrieve:{type:"retrieve",namespace:".options.data-api.schema",selector:"[data-schema-options]"},observe:{type:"observe",namespace:".model.data-api.schema",selector:"[data-schema-model]"},render:{type:"render",namespace:".view.data-api.schema",selector:"[data-schema-view]"},insert:{type:"insert",namespace:".template.data-api.schema",selector:"template[data-schema-target]"},route:{type:"route",namespace:".navigation.data-api.schema",selector:"a[data-schema-route]"},validate:{type:"validate",namespace:".form.data-api.schema",selector:"form[data-schema-validate]"},rating:{type:"rating",namespace:".form.data-api.schema",selector:"form[data-schema-rating]"},lazyload:{type:"lazyload",namespace:".image.data-api.schema",selector:"img[data-schema-lazyload]"},magnify:{type:"magnify",namespace:".image.data-api.schema",selector:"img[data-schema-magnify]"},sprite:{type:"sprite",namespace:".icon.svg.data-api.schema",selector:"i[data-schema-icon]"},trim:{type:"trim",namespace:".text.dom.data-api.schema",selector:"[data-schema-trim]"},copy:{type:"copy",namespace:".text.dom.data-api.schema",selector:"[data-schema-copy]"},extract:{type:"extract",namespace:".dom.data-api.schema",selector:"[data-schema-extract]"},dismiss:{type:"dismiss",namespace:".dom.data-api.schema",selector:"[data-schema-dismiss]"},autoplay:{type:"autoplay",namespace:".dom.data-api.schema",selector:"[data-schema-autoplay]"},toggle:{type:"toggle",namespace:".class.data-api.schema",selector:"[data-schema-toggle]"}},models:{}},schema),e(function(){schema.setup.autoLoad&&schema.load&&schema.load()})}(jQuery),function(e){"use strict";schema.create=function(t){return this.setup=e.extend({},schema.setup,t),Object.create(schema)},schema.load=function(t){var a=e.extend({},schema.events,t);for(var s in a)a.hasOwnProperty(s)&&schema.delegate(a[s],t)},schema.delegate=function(t,a){var s=t.type,r=s+t.namespace,c=t.delegation;if("number"!==e.type(c)){var n=a&&a.setup||schema.setup,i=n.autoBind.split(" "),o=n.autoTrigger.split(" "),h=r.replace(/^\./,"").split(".");c=i.some(function(e){var t=e.replace(/^\./,"").split(".");return t.every(function(e){return h.indexOf(e)!==-1})})?2:0,c+=o.some(function(e){var t=e.replace(/^\./,"").split(".");return t.every(function(e){return h.indexOf(e)!==-1})})?1:0,t.delegation=c}c>1&&(e(document).on(r,schema[s]),c>2&&schema.trigger(r,t.options))},schema.trigger=function(t,a){var s=t,r=e.type(a),c={};"object"===e.type(t)&&(s=t.type+t.namespace),"string"===r||"object"===r&&a.jquery?c.selector=a:c=a,e(document).trigger(s,c)},schema.parseData=function(e,t){var a={},s=t&&t.prefix||schema.setup.dataPrefix,r=s&&s.length||0;for(var c in e)if(e.hasOwnProperty(c)){var n=c.slice(r),i=e[c];n=n.replace(/^[A-Z]/,function(e){return e.toLowerCase()}),a[n]=""===i||i}return a},schema.parseOptions=function(t,a){var s={},r={},c=a&&a.prefix||"",n=e.type(t);if("object"===n)r=t;else if("string"===n)try{r=JSON.parse(t)}catch(e){if(t.indexOf(":")!==-1){var i=t.trim().replace(/\s*;$/,"").split(/\s*;\s*/),o=/(\S+)\s*:\s*(.*)/;i.filter(function(e){return o.test(e)}).forEach(function(e){var t=e.match(o),a=t[1].toLowerCase(),s=t[2].replace(/\,/g," ").trim();s.search(/\s+/)!==-1&&(s=s.split(/\s+/)),r[a]=s})}}c&&c.length&&(c+="-");for(var h in r)if(r.hasOwnProperty(h)){var m=c+h;m=m.replace(/\-\w/g,function(e){return e.charAt(1).toUpperCase()}),s[m]=r[h]}return s},schema.bind=function(t,a){var s=schema.events.bind,r=s.selector,c=e(a&&a.selector||r);c.each(function(){var t=e(this),a=schema.parseData(t.data()),c=schema.parseOptions(a.options);String(a.event).split(/\s+/).forEach(function(n){var i={type:n,selector:r.replace(/\-(\w+)\]$/,"-"+n+"]"),target:t},o=e.extend({},s,i,a,c);schema.events[n]=o,schema.delegate(o,c)})})},schema.retrieve=function(t,a){var s={prefix:schema.setup.dataPrefix},r=schema.events.retrieve.selector,c=e(a&&a.selector||r);c.each(function(){var t=e(this),a=schema.parseData(t.data()),r=schema.parseOptions(a.options,s);for(var c in r)r.hasOwnProperty(c)&&t.data(c,r[c])})},schema.observe=function(t,a){var s=schema.events,r=schema.models,c=s.observe.selector,n=e(a&&a.selector||c);n.each(function(){var t=e(this),a=schema.parseData(t.data()),c=a.trigger;if(c){var n=a.model,i=a.adapter,o=a.controller,h=a.value||null,m=h||a.text,l=a.init||null,p=a.empty||!1;t.on(c,function(){h=t.val()||t.text(),p&&(m?t.text(""):h&&t.val("")),i&&(h=schema[i](h,t)),schema.set(r,n,h),o&&e.extend(r,schema[o](r,t)),schema.trigger(s.render)}),(l||m&&l!==!1)&&(h?t.val(h):t.text(m),t.trigger(c.replace(/\s.*$/,"")))}})},schema.render=function(t,a){var s=schema.data,r=schema.events,c=schema.models,n=s.template,i=s.snapshot,o=r.render.selector,h=e(a&&a.selector||o);h.each(function(){var t=e(this),a=schema.parseData(t.data()),s=a.template,o=a.controller,h=a.condition,m=a.iteration,l=a.adapter,p=a.view,d=t.html(),u="",f=!0,g=!1;if(void 0===s&&(s=d,t.data(n,s)),o&&(c=e.extend({},c,schema[o](c,t))),"string"===e.type(p)){var v=a.snapshot||{};f=p.split(/\s*\,\s*/).every(function(e){if(c.hasOwnProperty(e)){var t=schema.get(c,e),a=schema.get(v,e);return schema.equals(t,a)||(schema.set(v,e,t),g=!0),!0}return!1}),g&&(v.updated=Date.now(),t.data(i,e.extend(!0,{},v)))}if(!f||h&&schema.get(c,h)!==!0)t.hide();else{if(g||l){if(m){var y=schema.regexp.segments,w=String(m).match(y);if(w){var x=w[1],b=w[3],O=schema.get(c,b);Array.isArray(O)&&(l&&(O=schema[l](O,t)),O.forEach(function(e){schema.set(c,x,e),u+=schema.format(s,c)}))}}else u=schema.format(s,c);if(u!==d){t.html(u);for(var j in r)if(r.hasOwnProperty(j)){var P=r[j],$=t.find(P.selector);$.length&&schema.trigger(P)}}}t.show()}})},schema.insert=function(t,a){var s=schema.events,r=s.insert.selector,c=e(a&&a.selector||r);c.each(function(){var t=e(this),a=schema.parseData(t.data()),r=t.html(),c=e(a.target),n=a.loader;n?e.when(schema[n](t)).done(function(t){r=e.isPlainObject(t)?schema.format(r,t):t,c.append(r);for(var a in s)if(s.hasOwnProperty(a)){var n=s[a],i=c.find(n.selector);i.length&&schema.trigger(n,i)}}).fail(function(){throw new Error("Schema fails to instantiate the template")}):r&&c.html(r)})},schema.route=function(t,a){var s=schema.data,r=s.route,c=s.changed,n=schema.events.route.selector,i=e(a&&a.selector||n),o=window.location.hash||"#";i.each(function(){var t=e(this),a=schema.parseData(t.data()),s=a.route;"boolean"===e.type(s)&&(s=t.attr("href")||""),"string"===e.type(s)&&(s=s.replace(/\:\w+/g,"(\\w+)").replace(/\/?$/,"/?$"),t.data(r,s),s=new RegExp(s)),"regexp"===e.type(s)&&s.test(o)&&t.click(),t.on("click",function(){t.data(c,!1)})}),e(window).on("hashchange",function(){var t=window.location.hash||"#";i.each(function(){var a=e(this),s=schema.parseData(a.data()),r=s.route;"string"===e.type(r)&&(r=new RegExp(r)),"regexp"===e.type(r)&&r.test(t)&&s.changed?a.click():a.data(c,!0)})})}}(jQuery),function(e){"use strict";schema.validate=function(t,a){var s=schema.data,r=s.changed,c=s.disabled,n=schema.events.validate.selector,i=e(a&&a.selector||n);i.each(function(){var t=e(this),a=schema.parseData(t.data()),s=a.validate;t.find(":input").one("change",function(){t.data(r,!0)}),t.on("submit",function(a){var n=e(this),i="changed"!==s||n.data(r);i?(n.find("input, textarea").each(function(){var t=e(this),a=t.val().toString().trim();""===a&&t.prop("disabled",!0).data(c,!0)}),"once"===s&&t.find(":submit").prop("disabled",!0),n.submit()):void 0===i&&window.history.back(),a.preventDefault()}),t.on("reset",function(){var t=e(this);return t.find("input, textarea").each(function(){var t=e(this);t.data(c)&&t.prop("disabled",!1).data(c,!1)}),!0})})},schema.rating=function(t,a){var s=schema.events,r=schema.data.icon,c=s.rating.selector,n=e(a&&a.selector||c);n.each(function(){var t=e(this),a=t.find("a > i"),c=a.parent(),n=schema.parseData(c.data()),i=n.icons.split(/\s*\,\s*/),o=n.score||0,h=Math.round(o),m=Math.abs(o-h),l=i.shift(),p=i.pop(),d=i.pop();a.each(function(n){var i=e(this);i.on("mouseenter",function(){i.prevAll().addBack().data(r,p),i.nextAll().data(r,l),schema.trigger(s.sprite,a)}),i.on("click",function(){c.prev('input[type="hidden"]').val(n+1),t.submit()})}),c.on("mouseleave",function(){a.slice(h).data(r,l),h>0&&(a.slice(0,h).data(r,p),d&&Math.abs(m)>.25&&a.eq(Math.floor(o)).data(r,d)),schema.trigger(s.sprite,a)})})}}(jQuery),function(e){"use strict";schema.lazyload=function(t,a){var s=schema.events.lazyload.selector,r=e(a&&a.selector||s);e(window).on("scroll",function(){var t=e(this),a=t.height()+t.scrollTop();r.each(function(){var t=e(this),s=schema.parseData(t.data()),r=t.attr("srcset")||"",c=s.src||r.split(" ")[0];if(c!==t.attr("src")){var n=+s.lazyload-1||200,i=t.offset().top-a;if(i<n){var o=+s.delay-1||0;window.setTimeout(function(){t.attr("src",c)},o)}}})}),e(window).scroll()},schema.magnify=function(t,a){var s=schema.events.magnify.selector,r=e(a&&a.selector||s);r.each(function(){var t=e(this),a=t.width(),s=t.height(),r=t.offset(),c=t.next(),n=schema.parseData(c.data()),i=n.shape||"rect",o=c.next(),h=o.find("img"),m=a*a/h.width(),l=s*s/h.height(),p=i.split(/[^\w\.]+/),d=p[0],u=+p[1]||m,f=+p[2]||l,g=a-u,v=s-f,y=a/u,w=s/f;"rect"!==d&&"square"!==d||c.width(u).height(f),o.width(a).height(s),t.on("mousemove",function(e){var t=Math.min(Math.max(e.pageX-r.left-u/2,0),g),a=Math.min(Math.max(e.pageY-r.top-f/2,0),v);c.css({left:t,top:a}),h.css("transform",schema.format("translate(${x}px, ${y}px)",{x:-y*t,y:-w*a}))})})}}(jQuery),function(e){"use strict";schema.trim=function(t,a){var s=schema.events.trim.selector,r=e(a&&a.selector||s);r.contents().filter(function(){return 3===this.nodeType}).remove()},schema.copy=function(t,a){var s=schema.events.copy.selector,r=e(a&&a.selector||s),c="";r.on("click",function(){var t=e(this),a=schema.parseData(t.data()),s=e(a.target||t.next());c=s.text(),document.execCommand("copy")}),document.addEventListener("copy",function(e){e.clipboardData.setData("text/plain",c),e.preventDefault()})},schema.toggle=function(t,a){var s=schema.storage,r=schema.events.toggle.selector,c=e(a&&a.selector||r);c.each(function(){var t=e(this),a=schema.parseData(t.data()),r=a.toggle,c="next"===r?t.next():e(r),n=schema.parseData(c.data()),i=n.toggler,o=a.trigger||"click",h=a.storage||"";t.on(o,function(){if(a.toggler){var t=a.toggler.trim().split(/\s*,\s*/),n=r.trim().replace(/\s*,$/,"").split(/\s*,\s*/);n.forEach(function(a,s){i=t[s]||i,e(a).toggleClass(i)}),i=""}else i&&c.toggleClass(i);if(h){var o=s.get(h)!==!0;s.set(h,o)}}),h&&a.init&&s.get(h)===!0&&(t.trigger(o.replace(/\s.*$/,"")),s.set(h,!0))})},schema.autoplay=function(t,a){var s=schema.events.autoplay.selector,r=e(a&&a.selector||s);r.each(function(){var t=e(this),a=schema.parseData(t.data()),s=t.children("input[type=radio]"),r=t.find("ol").last(),c=r.find("a,label"),n=c.first().attr("class"),i=+a.autoplay-1||5e3,o=c.length,h=1;window.setInterval(function(){if(!t.find("a:hover,label:hover").length){var e=c.eq(h);e.is("a")?window.location.hash=e.attr("href"):s.eq(h).prop("checked",!0),e.click()}},i),c.on("click",function(){c.removeClass(n),e(this).addClass(n),h=(c.index(this)+1)%o})})},schema.dismiss=function(t,a){var s=schema.events.dismiss.selector,r=e(a&&a.selector||s);r.each(function(){var t=e(this),a=schema.parseData(t.data()),s=+a.dismiss-1||0;t.one("click",function(){t.parent().remove()}),s>0&&window.setTimeout(function(){t.click()},s)})},schema.extract=function(t,a){var s=schema.regexp,r=schema.events.extract.selector,c=e(a&&a.selector||r);c.each(function(){var t=e(this),a=schema.parseData(t.data()),r=a.extract.split(/\s*\,\s*/);if(r.indexOf("url")!==-1){var c=s.url;t.html(t.html().replace(c,function(e){return schema.format('<a href="${href}">${href}</a>',{href:e})}))}if(r.indexOf("emoji")!==-1&&a.emoji){var n=s.emoji,i=a.emoji.replace(/\/*$/,"/"),o=Math.round(1.4*+t.css("font-size").slice(0,-2));t.html(t.html().replace(n,function(e,t,a,s){var r='${sep}<img src="${src}" height=${height} alt="${alt}" title="${title}" />';return schema.format(r,{sep:t,src:i+s.replace(/\_/g,"-")+".svg",height:o,alt:a,title:s})}))}})},schema.format=function(t,a){var s=String(t);if(e.isPlainObject(a)){var r=schema.regexp.placeholder,c=s.match(r)||[];c.forEach(function(t){var c=t.replace(r,"$1"),n=schema.get(a,c);e.isPlainObject(n)||(s=s.replace(t,function(){return n}))})}return s},schema.set=function(t,a,s){if(e.isPlainObject(t)){var r=String(a).replace(/\[([^\]]+)\]/g,".$1").split("."),c=r.pop(),n=t;r.forEach(function(t){n[t]=(e.isPlainObject(n)?n[t]:null)||{},n=n[t]}),n[c]=s}return t},schema.get=function(t,a){var s=t;if(e.isPlainObject(t)){var r=String(a).replace(/\[([^\]]+)\]/g,".$1").split(".");r.every(function(t){return!(!e.isPlainObject(s)||!s.hasOwnProperty(t))&&(s=s[t],!0)})}return s},schema.equals=function(t,a){if(t===a)return!0;if(null===t||null===a)return!1;if(e.type(t)===e.type(a)){if(e.isPlainObject(t)){if(Object.keys(t).length!==Object.keys(a).length)return!1;for(var s in t)if(t.hasOwnProperty(s)&&!schema.equals(t[s],a[s]))return!1;return!0}return Array.isArray(t)?t.length===a.length&&t.every(function(e,t){return schema.equals(e,a[t])}):t.toString()===a.toString()}return!1},schema.parseURL=function(e){var t=document.createElement("a");return t.href=e.replace(/([^:])\/{2,}/g,"$1/").replace(/\+/g," "),{href:t.href,origin:t.origin,protocol:t.protocol,username:t.username,password:t.password,host:t.host,hostname:t.hostname,port:t.port,path:t.pathname+t.search,pathname:t.pathname,segments:t.pathname.replace(/^\/+/,"").split("/"),search:t.search,query:function(){var e={},a=t.search.replace(/(^\?&?)|(&$)/g,"");return a.indexOf("=")===-1?a:(a.split(/&+/).forEach(function(t){var a=decodeURIComponent(t).split("="),s=a[0],r=a[1];e.hasOwnProperty(s)&&(r=[].concat(e[s],r)),e[s]=r}),e)}(),hash:t.hash,fragment:t.hash.replace(/^#/,"")}},schema.storage={set:function(e,t,a){a&&a.expires&&(t={value:t,expires:new Date(a.expires)}),window.localStorage.setItem(this.item(e,a),this.stringify(t))},get:function(t,a){var s=this.parse(window.localStorage.getItem(this.item(t,a)));return e.isPlainObject(s)&&s.hasOwnProperty("value")&&s.hasOwnProperty("expires")&&(Date.now()>s.expires.getTime()?(this.remove(t,a),s=void 0):s=s.value),s},remove:function(e,t){window.localStorage.removeItem(this.item(e,t))},item:function(e,t){var a=t&&t.prefix||schema.setup.dataPrefix;return a.length&&(a+="-"),a+e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()})},stringify:function(t){var a=["boolean","number","string","null"],s=e.type(t);if("object"===s)for(var r in t)t.hasOwnProperty(r)&&(t[r]=this.stringify(t[r]));else{if("regexp"===s)return t.toString();if(a.indexOf(s)!==-1)return t}return JSON.stringify(t)},parse:function(t){try{var a=e.type(t);if("string"===a)if(t=JSON.parse(t),"object"===a)for(var s in t)t.hasOwnProperty(s)&&(t[s]=this.parse(this.stringify(t[s])));else if("string"===a){var r=schema.regexp;if(r.date.test(t))t=new Date(t);else if(r.syntax.test(t)){var c=t.match(r.syntax);t=new RegExp(c[1],c[2])}}}finally{return t}}},schema.regexp={syntax:/^\/(.*)\/([gimuy]*)$/,delimiter:/(^\/)|(\/[gimuy]*$)/,ascii:/^[\x00-\x7F]+$/,segments:/^\s*([\w\-]+)(\s+.*\s+|[^\w\-]+)([\w\-]+)\s*$/,date:/^((\d{4})\-(\d{2})\-(\d{2}))T((\d{2})\:(\d{2})\:(\d{2}))(\.(\d{3}))?Z$/,emoji:/(^|[^\w\"\'\`])(\:([\w\-]+)\:)/g,placeholder:/\$\{\s*([^\{\}\s]+)\s*\}/g,url:/\b(ftp|https?|mailto|tel)\:\/\/[^\s\"]+(\/|\b)/g}}(jQuery),function(e){"use strict";schema.sprite=function(t,a){var s=schema.icons,r=schema.events.sprite.selector,c=e(a&&a.selector||r);c.each(function(){var t=e(this),a=schema.parseData(t.data()),r=a.icon||"unknown",c=s[r]||s.unknown;"string"===e.type(c)&&(c=s[c]);var n=a.width||c[0],i=a.height||c[1],o=a.path||c[2],h=a.color||c[3],m="http://www.w3.org/2000/svg",l=document.createElementNS(m,"svg");if(l.setAttribute("width",n),l.setAttribute("height",i),l.setAttribute("viewBox","0 0 "+n+" "+i),Array.isArray(o))o.forEach(function(e,t){var a=document.createElementNS(m,"path");h&&"unset"!==h&&a.setAttribute("fill",Array.isArray(h)?h[t]:h),a.setAttribute("d",e),l.appendChild(a)});else{var p=document.createElementNS(m,"path");h&&"unset"!==h&&p.setAttribute("fill",h),p.setAttribute("d",o),l.appendChild(p)}t.html(l)})},schema.icons={unknown:[32,32,"M1 1h31v31h-31zM3 3v27h27v-27z"]}}(jQuery);