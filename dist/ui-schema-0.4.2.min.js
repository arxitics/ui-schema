/*! UI Schema v0.4.2 | (c) 2016 Arxitics | MIT license */
if("undefined"==typeof jQuery)throw new Error("jQuery has not been loaded yet for context");var schema=jQuery.isPlainObject(schema)?schema:{};!function(e){"use strict";schema=e.extend(!0,{setup:{classPrefix:"ui",dataPrefix:"schema",autoLoad:!0,autoBind:".schema",autoTrigger:".schema"},data:{event:"schema-event",namespace:"schema-namespace",selector:"schema-selector",options:"schema-options",model:"schema-model",value:"schema-value",parser:"schema-parser",trigger:"schema-trigger",controller:"schema-controller",view:"schema-view",internal:"schema-internal",template:"schema-template",condition:"schema-condition",iteration:"schema-itration",target:"schema-target",instantiator:"schema-instantiator",validate:"schema-validate",changed:"schema-changed",disabled:"schema-disabled",rating:"schema-rating",score:"schema-score",icons:"schema-icons",lazyload:"schema-lazyload",delay:"schema-delay",src:"schema-src",trim:"schema-trim",toggle:"schema-toggle",toggler:"schema-toggler",storage:"schema-storage",init:"schema-init",autoplay:"schema-autoplay",dismiss:"schema-dismiss",extract:"schema-extract",emoji:"schema-emoji",icon:"schema-icon",width:"schema-width",height:"schema-height",path:"schema-path",color:"schema-color"},events:{bind:{type:"bind",namespace:".event.data-api.schema",selector:"[data-schema-event]"},retrieve:{type:"retrieve",namespace:".options.data-api.schema",selector:"[data-schema-options]"},observe:{type:"observe",namespace:".model.data-api.schema",selector:"[data-schema-model]"},render:{type:"render",namespace:".view.data-api.schema",selector:"[data-schema-view]"},insert:{type:"insert",namespace:".template.data-api.schema",selector:"template[data-schema-target]"},validate:{type:"validate",namespace:".form.data-api.schema",selector:"form[data-schema-validate]"},rating:{type:"rating",namespace:".form.data-api.schema",selector:"form[data-schema-rating]"},lazyload:{type:"lazyload",namespace:".image.data-api.schema",selector:"img[data-schema-lazyload]"},sprite:{type:"sprite",namespace:".icon.svg.data-api.schema",selector:"i[data-schema-icon]"},trim:{type:"trim",namespace:".text-node.dom.data-api.schema",selector:"[data-schema-trim]"},extract:{type:"extract",namespace:".dom.data-api.schema",selector:"[data-schema-extract]"},dismiss:{type:"dismiss",namespace:".dom.data-api.schema",selector:"[data-schema-dismiss]"},autoplay:{type:"autoplay",namespace:".dom.data-api.schema",selector:"[data-schema-autoplay]"},toggle:{type:"toggle",namespace:".class.data-api.schema",selector:"[data-schema-toggle]"}},models:{}},schema),e(function(){schema.setup.autoLoad&&schema.load&&schema.load()})}(jQuery),function(e){"use strict";schema.create=function(a){return this.setup=e.extend({},schema.setup,a),Object.create(schema)},schema.load=function(a){var t=e.extend({},schema.events,a);for(var s in t)t.hasOwnProperty(s)&&schema.delegate(t[s],a)},schema.delegate=function(a,t){var s=a.type,r=s+a.namespace,c=a.delegation;if("number"!=typeof c){var n=t&&t.setup||schema.setup,i=n.autoBind.split(" "),o=n.autoTrigger.split(" "),h=r.replace(/^\./,"").split(".");c=i.some(function(e){var a=e.replace(/^\./,"").split(".");return a.every(function(e){return-1!==h.indexOf(e)})})?2:0,c+=o.some(function(e){var a=e.replace(/^\./,"").split(".");return a.every(function(e){return-1!==h.indexOf(e)})})?1:0,a.delegation=c}if(c>1){var l=schema[s]||function(){};e(document).on(r,l),c>2&&e(document).trigger(r,a.options)}},schema.parseData=function(e,a){var t={},s=a&&a.prefix||schema.setup.dataPrefix,r=s&&s.length||0;for(var c in e)if(e.hasOwnProperty(c)){var n=c.slice(r),i=e[c];n=n.replace(/^[A-Z]/,function(e){return e.toLowerCase()}),t[n]=""===i?!0:i}return t},schema.parseOptions=function(e,a){var t={},s={},r=a&&a.prefix||"",c=Object.prototype.toString.call(e).slice(8,-1);if("Object"===c)s=e;else if("String"===c)try{s=JSON.parse(e)}catch(n){if(-1!==e.indexOf(":")){var i=e.trim().replace(/\s*;$/,"").split(/\s*;\s*/),o=/(\S+)\s*:\s*(.*)/;i.filter(function(e){return o.test(e)}).forEach(function(e){var a=e.match(o),t=a[1].toLowerCase(),r=a[2].replace(/\,/g," ").trim();-1!==r.search(/\s+/)&&(r=r.split(/\s+/)),s[t]=r})}}r&&r.length&&(r+="-");for(var h in s)if(s.hasOwnProperty(h)){var l=r+h;l=l.replace(/\-\w/g,function(e){return e.charAt(1).toUpperCase()}),t[l]=s[h]}return t},schema.bind=function(a,t){var s=schema.events.bind,r=s.selector,c=e(t&&t.selector||r);c.each(function(){var a=e(this),t=schema.parseData(a.data()),c=schema.parseOptions(t.options),n=t.event;if(n){var i={type:n,selector:r.replace(/\-(\w+)\]$/,"-"+n+"]"),target:a},o=e.extend({},s,i,t,c);schema.events[n]=o,schema.delegate(o)}})},schema.retrieve=function(a,t){var s={prefix:schema.setup.dataPrefix},r=schema.events.retrieve.selector,c=e(t&&t.selector||r);c.each(function(){var a=e(this),t=schema.parseData(a.data()),r=schema.parseOptions(t.options,s);for(var c in r)r.hasOwnProperty(c)&&a.data(c,r[c])})},schema.observe=function(a,t){var s=schema.models,r=schema.events.render.type,c=schema.events.observe.selector,n=e(t&&t.selector||c);n.each(function(){var a=e(this),t=schema.parseData(a.data()),c=t.model,n=t.parser,i=t.controller,o=t.trigger||"change click keyup",h=t.value||null,l=h||t.text;a.on(o,function(){h=a.val()||a.text(),n&&(h=schema[n](h)),s[c]=h,i&&(s=e.extend(s,schema[i](s))),e(document).trigger(r)}),l&&(h?a.val(h):a.text(l),a.trigger(o.replace(/\s.*$/,"")))})},schema.render=function(a,t){var s=schema.data,r=schema.events,c=schema.models,n=s.internal,i=s.template,o=r.render.selector,h=e(t&&t.selector||o);h.each(function(){var a=e(this),t=schema.parseData(a.data()),s=t.template,o=t.controller,h=t.condition,l=t.iteration,m=t.view,p=!0,d=a.html(),u="";if(void 0===s&&(s=d,a.data(i,s)),o&&(c=e.extend({},c,schema[o](c))),"string"==typeof m){var f=t.internal||{},v=!1;p=m.split(/\s*\,\s*/).every(function(e){if(c.hasOwnProperty(e)){var a=c[e],t=f[e];return JSON.stringify(a)!==JSON.stringify(t)&&(f[e]=a,v=!0),!0}return!1})&&v,v&&a.data(n,f)}if(p&&(!h||c[h]===!0)){if(l){var g=/^\s*([\w\-]+)(\s+.*\s+|[^\w\-]+)([\w\-]+)\s*$/,y=String(l).match(g);if(y){var w=y[1],b=y[3],x=c[b];Array.isArray(x)&&x.forEach(function(e){c[w]=e,u+=schema.format(s,c)})}}else u=schema.format(s,c);if(u!==d){a.html(u);for(var O in r)if(r.hasOwnProperty(O)){var j=r[O],$=a.find(j.selector);$.length&&e(document).trigger(j.type)}}}})},schema.insert=function(a,t){var s=schema.events.insert.selector,r=e(t&&t.selector||s);r.each(function(){var a=e(this),t=schema.parseData(a.data()),s=a.html(),r=t.target,c=t.instantiator;c&&(s=schema[c](s)),r&&s&&e(r).empty().append(s)})}}(jQuery),function(e){"use strict";schema.validate=function(a,t){var s=schema.data,r=s.changed,c=s.disabled,n=schema.events.validate.selector,i=e(t&&t.selector||n);i.each(function(){var a=e(this),t=schema.parseData(a.data()),s=t.validate;a.find(":input").one("change",function(){a.data(r,!0)}),a.on("submit",function(t){var n=e(this),i="changed"===s?n.data(r):!0;i?(n.find("input, textarea").each(function(){var a=e(this),t=a.val().toString().trim();""===t&&a.prop("disabled",!0).data(c,!0)}),"once"===s&&a.find(":submit").prop("disabled",!0),n.submit()):void 0===i&&history.back(),t.preventDefault()}),a.on("reset",function(a){var t=e(this);return t.find("input, textarea").each(function(){var a=e(this);a.data(c)&&a.prop("disabled",!1).data(c,!1)}),!0})})},schema.rating=function(a,t){var s=schema.events,r=schema.data.icon,c=s.sprite.type,n=s.rating.selector,i=e(t&&t.selector||n);i.each(function(){var a=e(this),t=a.find("a > i"),s=t.parent(),n=schema.parseData(s.data()),i=n.icons.split(/\s*\,\s*/),o=n.score||0,h=Math.round(o),l=Math.abs(o-h),m=i.shift(),p=i.pop(),d=i.pop(),u={selector:t};t.each(function(t){var n=e(this);n.on("mouseenter",function(){n.prevAll().addBack().data(r,p),n.nextAll().data(r,m),e(document).trigger(c,u)}),n.on("click",function(){s.prev('input[type="hidden"]').val(t+1),a.submit()})}),s.on("mouseleave",function(){t.slice(h).data(r,m),h>0&&(t.slice(0,h).data(r,p),d&&Math.abs(l)>.25&&t.eq(Math.floor(o)).data(r,d)),e(document).trigger(c,u)})})}}(jQuery),function(e){"use strict";schema.lazyload=function(a,t){var s=schema.events.lazyload.selector,r=e(t&&t.selector||s),c=e(window).height();e(window).on("scroll",function(){var a=e(window).scrollTop();r.each(function(){var t=e(this),s=schema.parseData(t.data()),r=s.src||t.attr("srcset");if(r!==t.attr("src")){var n=+s.lazyload-1||200,i=t.offset().top-c-a;if(n>i){var o=+s.delay-1||0;window.setTimeout(function(){t.attr("src",r)},o)}}})}),e(window).scroll()}}(jQuery),function(e){"use strict";schema.trim=function(a,t){var s=schema.events.trim.selector,r=e(t&&t.selector||s);r.contents().filter(function(){return 3===this.nodeType}).remove()},schema.toggle=function(a,t){var s=schema.events.toggle.selector,r=e(t&&t.selector||s);r.each(function(){var a=e(this),t=schema.parseData(a.data()),s=t.toggle,r="next"===s?a.next():e(s),c=schema.parseData(r.data()),n=c.toggler,i=t.trigger||"click",o=t.storage||"";a.on(i,function(){if(n)r.toggleClass(n);else if(t.toggler){var a=t.toggler.trim().split(/\s*,\s*/),c=s.trim().replace(/\s*,$/,"").split(/\s*,\s*/);c.forEach(function(t,s){n=a[s]||n,e(t).toggleClass(n)}),n=""}if(o&&window.localStorage){var i="true"===localStorage.getItem(o)?"false":"true";localStorage.setItem(o,i)}}),o&&window.localStorage&&t.init&&"true"===localStorage.getItem(o)&&(a.trigger(i.replace(/\s.*$/,"")),localStorage.setItem(o,"true"))})},schema.autoplay=function(a,t){var s=schema.events.autoplay.selector,r=e(t&&t.selector||s);r.each(function(){var a=e(this),t=schema.parseData(a.data()),s=a.children("input[type=radio]"),r=a.find("ol").last(),c=r.find("a,label"),n=c.first().attr("class"),i=+t.autoplay-1||5e3,o=c.length,h=1;window.setInterval(function(){if(!a.find("a:hover,label:hover").length){var e=c.eq(h);e.is("a")?window.location.hash=e.attr("href"):s.eq(h).prop("checked",!0),e.click()}},i),c.on("click",function(){c.removeClass(n),e(this).addClass(n),h=(c.index(this)+1)%o})})},schema.dismiss=function(a,t){var s=schema.events.dismiss.selector,r=e(t&&t.selector||s);r.each(function(){var a=e(this),t=schema.parseData(a.data()),s=+t.dismiss-1||0;a.one("click",function(){a.parent().remove()}),s>0&&window.setTimeout(function(){a.click()},s)})},schema.extract=function(a,t){var s=schema.events.extract.selector,r=e(t&&t.selector||s);r.each(function(){var a=e(this),t=schema.parseData(a.data()),s=t.extract.split(/\s*\,\s*/);if(-1!==s.indexOf("url")){var r=/\b(https?|ftp)\:\/\/[^\s\"]+(\/|\b)/g;a.html(a.html().replace(r,function(e){return schema.format('<a href="${href}">${href}</a>',{href:e})}))}if(-1!==s.indexOf("emoji")&&t.emoji){var c=/(^|[^\w\"\'\`])(\:([\w\-]+)\:)/g;a.html(a.html().replace(c,function(e,s,r,c){var n='${sep}<img src="${src}" height=${height} alt="${alt}" title="${title}" />';return schema.format(n,{sep:s,src:t.emoji.replace(/\/*$/,"/")+c.replace(/\_/g,"-")+".svg",height:Math.round(1.4*+a.css("font-size").slice(0,-2)),alt:r,title:c})}))}})},schema.format=function(e,a){var t=String(e),s=Object.prototype.toString.call(a).slice(8,-1);return"Object"===s&&t.match(/\$\{[^\{\}]+\}/g).forEach(function(e,s){var r=e.replace(/^\$\{\s*(.+)\s*\}$/,"$1"),c=a;r.replace(/\[([^\]]+)\]/g,".$1").split(".").every(function(e){return"object"==typeof c&&c.hasOwnProperty(e)?(c=c[e],!0):!1}),"object"!=typeof c&&(t=t.replace(e,function(){return c}))}),t},schema.parseURL=function(e){var a=document.createElement("a");return a.href=e.replace(/([^:])\/{2,}/g,"$1/").replace(/\+/g," "),{href:a.href,origin:a.origin,protocol:a.protocol,username:a.username,password:a.password,host:a.host,hostname:a.hostname,port:a.port,path:a.pathname+a.search,pathname:a.pathname,segments:a.pathname.replace(/^\/+/,"").split("/"),search:a.search,query:function(){var e={},t=a.search.replace(/(^\?&?)|(&$)/g,"");return-1===t.indexOf("=")?t:(t.split(/&+/).forEach(function(a){var t=decodeURIComponent(a).split("="),s=t[0],r=t[1];e.hasOwnProperty(s)&&(r=[].concat(e[s],r)),e[s]=r}),e)}(),hash:a.hash,fragment:a.hash.replace(/^#/,"")}}}(jQuery),function(e){"use strict";schema.sprite=function(a,t){var s=schema.icons,r=schema.events.sprite.selector,c=e(t&&t.selector||r);c.each(function(){var a=e(this),t=schema.parseData(a.data()),r=t.icon||"unknown",c=s[r]||s.unknown;"string"==typeof c&&(c=s[c]);var n=t.width||c[0],i=t.height||c[1],o=t.path||c[2],h=t.color||c[3],l="http://www.w3.org/2000/svg",m=document.createElementNS(l,"svg");if(m.setAttribute("width",n),m.setAttribute("height",i),m.setAttribute("viewBox","0 0 "+n+" "+i),Array.isArray(o))o.forEach(function(e,a){var t=document.createElementNS(l,"path");h&&"unset"!==h&&t.setAttribute("fill",Array.isArray(h)?h[a]:h),t.setAttribute("d",e),m.appendChild(t)});else{var p=document.createElementNS(l,"path");h&&"unset"!==h&&p.setAttribute("fill",h),p.setAttribute("d",o),m.appendChild(p)}a.empty().append(m)})},schema.icons={unknown:[32,32,"M1 1h31v31h-31zM3 3v27h27v-27z"]}}(jQuery);