/*! UI Schema v0.4.5 | (c) 2017 Arxitics | MIT license */
if("undefined"==typeof jQuery)throw new Error("jQuery has not been loaded yet for context");var schema=jQuery.isPlainObject(schema)?schema:{};!function(e){"use strict";schema=e.extend(!0,{setup:{classPrefix:"ui",dataPrefix:"schema",autoLoad:!0,autoBind:".schema",autoTrigger:".schema"},data:{event:"schema-event",namespace:"schema-namespace",selector:"schema-selector",options:"schema-options",animation:"schema-animation",model:"schema-model",value:"schema-value",text:"schema-text",adapter:"schema-adapter",controller:"schema-controller",trigger:"schema-trigger",init:"schema-init",empty:"schema-empty",view:"schema-view",template:"schema-template",snapshot:"schema-snapshot",condition:"schema-condition",iteration:"schema-itration",target:"schema-target",loader:"schema-loader",route:"schema-route",validate:"schema-validate",changed:"schema-changed",disabled:"schema-disabled",required:"schema-required",rating:"schema-rating",icons:"schema-icons",tagging:"schema-tagging",lazyload:"schema-lazyload",delay:"schema-delay",src:"schema-src",magnify:"schema-magnify",shape:"schema-shape",trim:"schema-trim",toggle:"schema-toggle",toggler:"schema-toggler",storage:"schema-storage",autoplay:"schema-autoplay",dismiss:"schema-dismiss",extract:"schema-extract",emoji:"schema-emoji",format:"schema-format",icon:"schema-icon",width:"schema-width",height:"schema-height",path:"schema-path",color:"schema-color"},events:{bind:{type:"bind",namespace:".event.data-api.schema",selector:"[data-schema-event]"},retrieve:{type:"retrieve",namespace:".options.data-api.schema",selector:"[data-schema-options]"},observe:{type:"observe",namespace:".model.data-api.schema",selector:"[data-schema-model]"},render:{type:"render",namespace:".view.data-api.schema",selector:"[data-schema-view]"},insert:{type:"insert",namespace:".template.data-api.schema",selector:"template[data-schema-target]"},route:{type:"route",namespace:".navigation.data-api.schema",selector:"a[data-schema-route]"},validate:{type:"validate",namespace:".form.data-api.schema",selector:"form[data-schema-validate]"},rating:{type:"rating",namespace:".form.data-api.schema",selector:"input[data-schema-rating]"},tagging:{type:"tagging",namespace:".form.data-api.schema",selector:"input[data-schema-tagging]"},lazyload:{type:"lazyload",namespace:".image.data-api.schema",selector:"img[data-schema-lazyload]"},magnify:{type:"magnify",namespace:".image.data-api.schema",selector:"img[data-schema-magnify]"},sprite:{type:"sprite",namespace:".icon.svg.data-api.schema",selector:"i[data-schema-icon]"},trim:{type:"trim",namespace:".text.dom.data-api.schema",selector:"[data-schema-trim]"},copy:{type:"copy",namespace:".text.dom.data-api.schema",selector:"[data-schema-copy]"},extract:{type:"extract",namespace:".dom.data-api.schema",selector:"[data-schema-extract]"},dismiss:{type:"dismiss",namespace:".dom.data-api.schema",selector:"[data-schema-dismiss]"},autoplay:{type:"autoplay",namespace:".dom.data-api.schema",selector:"[data-schema-autoplay]"},toggle:{type:"toggle",namespace:".class.data-api.schema",selector:"[data-schema-toggle]"}},models:{}},schema),e(function(){schema.setup.autoLoad&&schema.load&&schema.load()})}(jQuery),function(e){"use strict";schema.create=function(a){return this.setup=e.extend({},schema.setup,a),Object.create(schema)},schema.load=function(a){var t=e.extend({},schema.events,a);for(var s in t)t.hasOwnProperty(s)&&schema.delegate(t[s],a)},schema.delegate=function(a,t){var s=a.type,r=s+a.namespace,n=a.delegation;if("number"!==e.type(n)){var i=t&&t.setup||schema.setup,c=i.autoBind.split(" "),o=i.autoTrigger.split(" "),h=r.replace(/^\./,"").split(".");n=c.some(function(e){var a=e.replace(/^\./,"").split(".");return a.every(function(e){return h.indexOf(e)!==-1})})?2:0,n+=o.some(function(e){var a=e.replace(/^\./,"").split(".");return a.every(function(e){return h.indexOf(e)!==-1})})?1:0,a.delegation=n}n>1&&(e(document).on(r,schema[s]),n>2&&schema.trigger(r,a.options))},schema.find=function(a,t){var s=t&&t.selector;return s||("string"===e.type(a)&&(a=schema.events[a]||{}),s=a&&a.selector),e(s)},schema.trigger=function(a,t){var s=a,r=e.type(t),n={};"object"===e.type(a)&&(s=a.type+a.namespace),"string"===r||"object"===r&&t.jquery?n.selector=t:n=t,e(document).trigger(s,n)},schema.parseData=function(e,a){var t={},s=a&&a.prefix||schema.setup.dataPrefix,r=s&&s.length||0;for(var n in e)if(e.hasOwnProperty(n)){var i=n.slice(r),c=e[n];i=i.replace(/^[A-Z]/,function(e){return e.toLowerCase()}),t[i]=""===c||c}return t},schema.parseOptions=function(a,t){var s={},r={},n=t&&t.prefix||"",i=e.type(a);if("object"===i)r=a;else if("string"===i)try{r=JSON.parse(a)}catch(e){if(a.indexOf(":")!==-1){var c=a.trim().replace(/\s*;$/,"").split(/\s*;\s*/),o=/(\S+)\s*:\s*(.*)/;c.filter(function(e){return o.test(e)}).forEach(function(e){var a=e.match(o),t=a[1].toLowerCase(),s=a[2].replace(/\,/g," ").trim();s.search(/\s+/)!==-1&&(s=s.split(/\s+/)),r[t]=s})}}n&&n.length&&(n+="-");for(var h in r)if(r.hasOwnProperty(h)){var m=n+h;m=m.replace(/\-\w/g,function(e){return e.charAt(1).toUpperCase()}),s[m]=r[h]}return s},schema.bind=function(a,t){var s=schema.events.bind,r=s.selector,n=e(t&&t.selector||r);n.each(function(){var a=e(this),t=schema.parseData(a.data()),n=schema.parseOptions(t.options);String(t.event).split(/\s+/).forEach(function(i){var c={type:i,selector:r.replace(/\-(\w+)\]$/,"-"+i+"]"),target:a},o=e.extend({},s,c,t,n);schema.events[i]=o,schema.delegate(o,n)})})},schema.retrieve=function(a,t){var s={prefix:schema.setup.dataPrefix},r=schema.events.retrieve.selector,n=e(t&&t.selector||r);n.each(function(){var a=e(this),t=schema.parseData(a.data()),r=schema.parseOptions(t.options,s);for(var n in r)r.hasOwnProperty(n)&&a.data(n,r[n])})},schema.observe=function(a,t){var s=schema.events,r=schema.models,n=s.observe.selector,i=e(t&&t.selector||n);i.each(function(){var a=e(this),t=schema.parseData(a.data()),n=t.trigger;if(n){var i=t.model,c=t.adapter,o=t.controller,h=t.value||null,m=h||t.text,l=t.init||null,p=t.empty||!1;a.on(n,function(){h=a.val()||a.text(),p&&(m?a.text(""):h&&a.val("")),c&&(h=schema[c](h,a)),schema.set(r,i,h),o&&e.extend(r,schema[o](r,a)),schema.trigger(s.render)}),(l||m&&l!==!1)&&(h?a.val(h):a.text(m),a.trigger(n.replace(/\s.*$/,"")))}})},schema.render=function(a,t){var s=schema.data,r=schema.events,n=schema.models,i=s.template,c=s.snapshot,o=r.render.selector,h=e(t&&t.selector||o);h.each(function(){var a=e(this),t=schema.parseData(a.data()),s=t.animation,o=t.controller,h=t.condition,m=t.iteration,l=t.adapter,p=t.view,d=t.template,f=a.html(),u="",g=!0,v=!1;if(void 0===d&&(d=f,a.data(i,d)),o&&(n=e.extend({},n,schema[o](n,a))),"string"===e.type(p)){var y=t.snapshot||{};g=p.split(/\s*\,\s*/).every(function(e){if(n.hasOwnProperty(e)){var a=schema.get(n,e),t=schema.get(y,e);return schema.equals(a,t)||(schema.set(y,e,a),v=!0),!0}return!1}),v&&(y.updated=Date.now(),a.data(c,e.extend(!0,{},y)))}if(!g||h&&schema.get(n,h)!==!0)a.css("visibility","hidden"),a.hide(s);else{if(v||l){if(m){var x=schema.regexp.segments,w=String(m).match(x);if(w){var b=w[1],O=w[3],j=schema.get(n,O);Array.isArray(j)&&(l&&(j=schema[l](j,a)),j.forEach(function(e){schema.set(n,b,e),u+=schema.format(d,n)}))}}else u=schema.format(d,n);if(u!==f){a.html(u);for(var D in r)if(r.hasOwnProperty(D)){var P=r[D],$=a.find(P.selector);$.length&&schema.trigger(P)}}}a.css("visibility","visible"),a.show()}})},schema.insert=function(a,t){var s=schema.events,r=s.insert.selector,n=e(t&&t.selector||r);n.each(function(){var a=e(this),t=schema.parseData(a.data()),r=a.html(),n=e(t.target),i=t.loader;i?e.when(schema[i](a)).done(function(a){r=e.isPlainObject(a)?schema.format(r,a):a,n.append(r);for(var t in s)if(s.hasOwnProperty(t)){var i=s[t],c=n.find(i.selector);c.length&&schema.trigger(i,c)}}).fail(function(){throw new Error("Schema fails to instantiate the template")}):r&&n.html(r)})},schema.route=function(a,t){var s=schema.data,r=s.route,n=s.changed,i=schema.events.route.selector,c=e(t&&t.selector||i),o=window.location.hash||"#";c.each(function(){var a=e(this),t=schema.parseData(a.data()),s=t.route;"boolean"===e.type(s)&&(s=a.attr("href")||""),"string"===e.type(s)&&(s=s.replace(/\:\w+/g,"(\\w+)").replace(/\/?$/,"/?$"),a.data(r,s),s=new RegExp(s)),"regexp"===e.type(s)&&s.test(o)&&a.click(),a.on("click",function(){a.data(n,!1)})}),e(window).on("hashchange",function(){var a=window.location.hash||"#";c.each(function(){var t=e(this),s=schema.parseData(t.data()),r=s.route;"string"===e.type(r)&&(r=new RegExp(r)),"regexp"===e.type(r)&&r.test(a)&&s.changed?t.click():t.data(n,!0)})})}}(jQuery),function(e){"use strict";schema.validate=function(a,t){var s=schema.data,r=s.changed,n=s.disabled,i=schema.find("validate",t);i.each(function(){var a=e(this),t=schema.parseData(a.data()),s=t.validate;a.find(":input").one("change",function(){a.data(r,!0)}),a.on("submit",function(t){var i="changed"!==s||a.data(r);i?(a.find("input, textarea").each(function(){var a=e(this),t=a.val().toString().trim();""===t&&a.prop("disabled",!0).data(n,!0)}),"once"===s&&a.find(":submit").prop("disabled",!0),a.submit()):void 0===i&&window.history.back(),t.preventDefault()}),a.on("reset",function(){return a.find("input, textarea").each(function(){var a=e(this);a.data(n)&&a.prop("disabled",!1).data(n,!1)}),!0})})},schema.rating=function(a,t){var s=schema.events,r=schema.data.icon,n=schema.find("rating",t);n.each(function(){var a=e(this),t=a.closest("form"),n=a.next(),i=n.find("i"),c=schema.parseData(n.data()),o=c.icons.split(/\s*\,\s*/),h=Number(a.val()||0),m=Math.round(h),l=Math.abs(h-m),p=o.shift(),d=o.pop(),f=o.pop();n.on("mouseenter","i",function(){var a=e(this);a.prevAll().addBack().data(r,d),a.nextAll().data(r,p),schema.trigger(s.sprite,i)}),n.on("mouseleave",function(){i.slice(m).data(r,p),m>0&&(i.slice(0,m).data(r,d),f&&Math.abs(l)>.25&&i.eq(Math.floor(h)).data(r,f)),schema.trigger(s.sprite,i)}),n.on("click","i",function(){var s=e(this).prevAll().length;a.val(s+1),t.submit()})})},schema.tagging=function(a,t){var s=schema.events,r=schema.find("tagging",t);r.each(function(){var a=e(this),t=schema.parseData(a.data()),r=a.parent(),n=a.next(),i=n.is(":last-child")?r.next():n.next(),c=i.find("span:first-child"),o=a.closest("form"),h=t.required,m=a.val(),l=[],p=0,d="";n.on("change",function(){if(d=n.val(),d&&l.indexOf(d)===-1){var e=r.find('option[value="'+d+'"]'),a=schema.parseData(e.data());if(a.empty)i.find("span > :last-child").click(),l.length=0;else{var t=e.text()||d;i.append(c.clone().prepend(t)),n.is("input")&&n.val(""),l.push(d),schema.trigger(s.sprite,i.find("i"))}}}),i.on("click","span > :last-child",function(){var a=e(this).parent();(!h||l.length>1)&&(p=a.prevAll().length,l.splice(p,1),a.remove())}),i.on("dragstart","span",function(a){var t=e(this);p=t.prevAll().length,d=t.text(),a.dataTransfer.setData("text/html",t.html())}),i.on("dragover","span",function(e){"text/html"==e.dataTransfer.types&&e.preventDefault()}),i.on("drop","span",function(a){var t=e(a.target),r=t.html(),n=t.text();return n&&d&&(l[p]=n,l[t.prevAll().length]=d,t.html(a.dataTransfer.getData("text/html")),i.find("span").eq(p).html(r),schema.trigger(s.sprite,i.find("i"))),!1}),o.on("submit",function(){return a.val(l.join(",")),!0}),m&&m.split(",").forEach(function(e){n.val(e).change()}),n.change(),c.remove()}),e.event.addProp("dataTransfer")}}(jQuery),function(e){"use strict";schema.lazyload=function(a,t){var s=schema.find("lazyload",t);e(window).on("scroll",function(){var a=e(this),t=a.height()+a.scrollTop();s.each(function(){var a=e(this),s=schema.parseData(a.data()),r=a.attr("srcset")||"",n=s.src||r.split(" ")[0];if(n!==a.attr("src")){var i=+s.lazyload-1||200,c=a.offset().top-t;if(c<i){var o=+s.delay-1||0;window.setTimeout(function(){a.attr("src",n)},o)}}})}),e(window).scroll()},schema.magnify=function(a,t){var s=schema.find("magnify",t);s.each(function(){var a=e(this),t=a.width(),s=a.height(),r=a.offset(),n=a.next(),i=schema.parseData(n.data()),c=i.shape||"rect",o=n.next(),h=o.find("img"),m=t*t/h.width(),l=s*s/h.height(),p=c.split(/[^\w\.]+/),d=p[0],f=+p[1]||m,u=+p[2]||l,g=t-f,v=s-u,y=t/f,x=s/u;"rect"!==d&&"square"!==d||n.width(f).height(u),o.width(t).height(s),a.on("mousemove",function(e){var a=Math.min(Math.max(e.pageX-r.left-f/2,0),g),t=Math.min(Math.max(e.pageY-r.top-u/2,0),v);n.css({left:a,top:t}),h.css("transform",schema.format("translate(${x}px, ${y}px)",{x:-y*a,y:-x*t}))})})}}(jQuery),function(e){"use strict";schema.trim=function(e,a){var t=schema.find("trim",a);t.contents().filter(function(){return 3===this.nodeType}).remove()},schema.copy=function(a,t){var s=schema.find("copy",t),r="";s.on("click",function(){var a=e(this),t=schema.parseData(a.data()),s=e(t.target||a.next());r=s.text(),document.execCommand("copy")}),document.addEventListener("copy",function(e){e.clipboardData.setData("text/plain",r),e.preventDefault()})},schema.toggle=function(a,t){var s=schema.storage,r=schema.find("toggle",t);r.each(function(){var a=e(this),t=schema.parseData(a.data()),r=t.toggle,n="next"===r?a.next():e(r),i=schema.parseData(n.data()),c=i.toggler,o=t.trigger||"click",h=t.storage||"";a.on(o,function(){if(t.toggler){var a=t.toggler.trim().split(/\s*,\s*/),i=r.trim().replace(/\s*,$/,"").split(/\s*,\s*/);i.forEach(function(t,s){c=a[s]||c,e(t).toggleClass(c)}),c=""}else c&&n.toggleClass(c);if(h){var o=s.get(h)!==!0;s.set(h,o)}}),h&&t.init&&s.get(h)===!0&&(a.trigger(o.replace(/\s.*$/,"")),s.set(h,!0))})},schema.autoplay=function(a,t){var s=schema.find("autoplay",t);s.each(function(){var a=e(this),t=schema.parseData(a.data()),s=a.children("input[type=radio]"),r=a.find("ol").last(),n=r.find("a,label"),i=n.first().attr("class"),c=+t.autoplay-1||5e3,o=n.length,h=1;window.setInterval(function(){if(!a.find("a:hover,label:hover").length){var e=n.eq(h);e.is("a")?window.location.hash=e.attr("href"):s.eq(h).prop("checked",!0),e.click()}},c),n.on("click",function(){n.removeClass(i),e(this).addClass(i),h=(n.index(this)+1)%o})})},schema.dismiss=function(a,t){var s=schema.find("dismiss",t);s.each(function(){var a=e(this),t=schema.parseData(a.data()),s=+t.dismiss-1||0;a.one("click",function(){a.parent().remove()}),s>0&&window.setTimeout(function(){a.click()},s)})},schema.extract=function(a,t){var s=schema.regexp,r=schema.find("extract",t);r.each(function(){var a=e(this),t=schema.parseData(a.data()),r=t.extract.split(/\s*\,\s*/);if(r.indexOf("url")!==-1){var n=s.url;a.html(a.html().replace(n,function(e){return schema.format('<a href="${href}">${href}</a>',{href:e})}))}if(r.indexOf("emoji")!==-1&&t.emoji){var i=s.emoji,c=t.emoji.replace(/\/*$/,""),o=String(t.format||"svg").replace(/^\.*/,""),h=Math.round(1.4*+a.css("font-size").slice(0,-2));a.html(a.html().replace(i,function(e,a,t,s){var r='${sep}<img src="${path}/${name}.${format}" height=${height} alt="${alt}" title="${title}">';return schema.format(r,{sep:a,path:c,name:s.replace(/\_/g,"-"),format:o,height:h,alt:t,title:s})}))}})},schema.format=function(a,t){var s=String(a);if(e.isPlainObject(t)){var r=schema.regexp.placeholder,n=s.match(r)||[];n.forEach(function(a){var n=a.replace(r,"$1"),i=schema.get(t,n);e.isPlainObject(i)||(s=s.replace(a,function(){return i}))})}return s},schema.set=function(a,t,s){if(e.isPlainObject(a)){var r=String(t).replace(/\[([^\]]+)\]/g,".$1").split("."),n=r.pop(),i=a;r.forEach(function(a){i[a]=(e.isPlainObject(i)?i[a]:null)||{},i=i[a]}),i[n]=s}return a},schema.get=function(a,t){var s=a;if(e.isPlainObject(a)){var r=String(t).replace(/\[([^\]]+)\]/g,".$1").split(".");r.every(function(a){return!(!e.isPlainObject(s)||!s.hasOwnProperty(a))&&(s=s[a],!0)})}return s},schema.equals=function(a,t){if(a===t)return!0;if(null===a||null===t)return!1;if(e.type(a)===e.type(t)){if(e.isPlainObject(a)){if(Object.keys(a).length!==Object.keys(t).length)return!1;for(var s in a)if(a.hasOwnProperty(s)&&!schema.equals(a[s],t[s]))return!1;return!0}return Array.isArray(a)?a.length===t.length&&a.every(function(e,a){return schema.equals(e,t[a])}):a.toString()===t.toString()}return!1},schema.parseURL=function(e){var a=document.createElement("a");return a.href=e.replace(/([^:])\/{2,}/g,"$1/").replace(/\+/g," "),{href:a.href,origin:a.origin,protocol:a.protocol,username:a.username,password:a.password,host:a.host,hostname:a.hostname,port:a.port,path:a.pathname+a.search,pathname:a.pathname,segments:a.pathname.replace(/^\/+/,"").split("/"),search:a.search,query:function(){var e={},t=a.search.replace(/(^\?&?)|(&$)/g,"");return t.indexOf("=")===-1?t:(t.split(/&+/).forEach(function(a){var t=decodeURIComponent(a).split("="),s=t[0],r=t[1];e.hasOwnProperty(s)&&(r=[].concat(e[s],r)),e[s]=r}),e)}(),hash:a.hash,fragment:a.hash.replace(/^#/,"")}},schema.storage={set:function(e,a,t){t&&t.expires&&(a={value:a,expires:new Date(t.expires)}),window.localStorage.setItem(this.item(e,t),this.stringify(a))},get:function(a,t){var s=this.parse(window.localStorage.getItem(this.item(a,t)));return e.isPlainObject(s)&&s.hasOwnProperty("value")&&s.hasOwnProperty("expires")&&(Date.now()>s.expires.getTime()?(this.remove(a,t),s=void 0):s=s.value),s},remove:function(e,a){window.localStorage.removeItem(this.item(e,a))},item:function(e,a){var t=a&&a.prefix||schema.setup.dataPrefix;return t.length&&(t+="-"),t+e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()})},stringify:function(a){var t=["boolean","number","string","null"],s=e.type(a);if("object"===s)for(var r in a)a.hasOwnProperty(r)&&(a[r]=this.stringify(a[r]));else{if("regexp"===s)return a.toString();if(t.indexOf(s)!==-1)return a}return JSON.stringify(a)},parse:function(a){try{var t=e.type(a);if("string"===t)if(a=JSON.parse(a),"object"===t)for(var s in a)a.hasOwnProperty(s)&&(a[s]=this.parse(this.stringify(a[s])));else if("string"===t){var r=schema.regexp;if(r.date.test(a))a=new Date(a);else if(r.syntax.test(a)){var n=a.match(r.syntax);a=new RegExp(n[1],n[2])}}}finally{return a}}},schema.regexp={syntax:/^\/(.*)\/([gimuy]*)$/,delimiter:/(^\/)|(\/[gimuy]*$)/,ascii:/^[\x00-\x7F]+$/,segments:/^\s*([\w\-]+)(\s+.*\s+|[^\w\-]+)([\w\-]+)\s*$/,date:/^((\d{4})\-(\d{2})\-(\d{2}))T((\d{2})\:(\d{2})\:(\d{2}))(\.(\d{3}))?Z$/,emoji:/(^|[^\w\"\'\`])(\:([\w\-]+)\:)/g,placeholder:/\$\{\s*([^\{\}\s]+)\s*\}/g,url:/\b((ftp|https?)\:\/\/|(mailto|tel)\:)[^\s\"]+(\/|\b)/g}}(jQuery),function(e){"use strict";schema.sprite=function(a,t){var s=schema.icons,r=schema.find("sprite",t);r.each(function(){var a=e(this),t=schema.parseData(a.data()),r=t.animation||!1,n=t.icon||"unknown",i=s[n]||s.unknown;"string"===e.type(i)&&(i=s[i]);var c=t.width||i[0],o=t.height||i[1],h=t.path||i[2],m=t.color||i[3],l="http://www.w3.org/2000/svg",p=document.createElementNS(l,"svg");if(p.setAttribute("width",c),p.setAttribute("height",o),p.setAttribute("viewBox","0 0 "+c+" "+o),Array.isArray(h))h.forEach(function(e,a){var t=document.createElementNS(l,"path");m&&"unset"!==m&&t.setAttribute("fill",Array.isArray(m)?m[a]:m),t.setAttribute("d",e),p.appendChild(t)});else{var d=document.createElementNS(l,"path");m&&"unset"!==m&&d.setAttribute("fill",m),d.setAttribute("d",h),p.appendChild(d)}!a.html()&&r?a.hide().html(p).show(r):a.html(p)})},schema.icons={unknown:[32,32,"M1 1h31v31h-31zM3 3v27h27v-27z"]}}(jQuery);